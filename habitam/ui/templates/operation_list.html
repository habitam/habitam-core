{% extends 'building.html' %} 

{% block building_body %}
<h3>
Operațiuni pentru {{ account.holder }} în {{ month|date:"F Y" }}
<span class="btn-group pull-right" style="display: inline-block;">
	<a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
    	Luna	
    	<span class="caret"></span>
  	</a>
  	<ul class="dropdown-menu">
	{% with license=user.administrator.license %}
	{% for m in license.available_months %}
		<li><a href="{% url 'operation_list' account_id=account.id month=m|date:"Y-m" %}">{{ m|date:"F Y" }}</a></li>
	{% endfor %}
	{% endwith %}
	</ul>
</span>
</h3>
<table class="table table-hover table-condensed">
	<thead>
		<th>Data</th>
		<th>Ordinator</th>
		<th>Document</th>
		<th>Suma</th>
		<th></th>
	</thead>
	<tbody>
	<tr>
		<td></td>
		<td></td>
		<td style="text-align: right;"><em>Sold inițial</em></td>
		<td class="{% if initial_balance < 0 %}negative_balance{% else %}positive_balance{% endif %}"><em>{{ initial_balance }}</em></td>
		<td></td>
	</tr>
	{% for doc in docs %}
		{% if doc.src == account %}
		{% include 'operation_row.html' with doc=doc other=doc.billed.holder negative=True amount=doc.total_amount %}
		{% else %}
		{% include 'operation_row.html' with doc=doc other=doc.src.holder negative=False amount=doc.total_amount %}
		{% endif %}
	{% endfor %}
	<tr>
		<td></td>
		<td></td>
		<td style="text-align: right;"><em>Sold final</em></td>
		<td class="{% if final_balance < 0 %}negative_balance{% else %}positive_balance{% endif %}"><em>{{ final_balance }}</em></td>
		<td></td>
	</tr>
	</tbody>
</table>
{% endblock %}