{% extends 'building.html' %} 

{% block building_body %}
<h1>Operații pentru {{ account.holder }}</h1>
<table class="table table-hover table-condensed">
	<thead>
		<th>Data</th>
		<th>Ordinator</th>
		<th>Document</th>
		<th>Suma</th>
		<th></th>
	</thead>
	<tbody>
	{% for doc in docs %}
		{% if doc.src == account %}
		{% include 'operation_row.html' with doc=doc other=doc.billed.holder negative=True amount=doc.total_amount %}
		{% else %}
		{% include 'operation_row.html' with doc=doc other=doc.src.holder negative=False amount=doc.total_amount %}
		{% endif %}
	{% endfor %}
	</tbody>
</table>

<div id="deleteModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="deleteLabel" aria-hidden="true">
	<div class="modal-body">
		<p>Sunteți sigur că vreți să ștergeți această operațiune?</p>
	</div>
	<div class="modal-footer">
		<button id="deleteButton" class="btn btn-danger">Da</button>
		<button class="btn" data-dismiss="modal" aria-hidden="true">Nu</button>
	</div>	
</div>

<script>
function delete_click(path) {
	var csrftoken = $.cookie('csrftoken');
	$('#deleteButton').click(function() {
		$.ajax({
			type: "DELETE",
			url: path,
			beforeSend: function(xhr, settings) {
	            xhr.setRequestHeader("X-CSRFToken", csrftoken);
		    } 
		}).done(function() {
			location.reload();		
		});
	});
}
</script>
{% endblock %}